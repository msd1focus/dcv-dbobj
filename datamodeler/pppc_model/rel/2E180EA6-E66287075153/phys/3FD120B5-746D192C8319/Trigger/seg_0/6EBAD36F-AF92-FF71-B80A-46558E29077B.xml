<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="FCS_NEW_DATA_AUDIT_UPDATE" directorySegmentName="seg_0" id="6EBAD36F-AF92-FF71-B80A-46558E29077B">
<sourceConnName>pppc@uatfdi</sourceConnName>
<sourceObjSchema>FOCUSPP</sourceObjSchema>
<sourceObjName>FCS_NEW_DATA_AUDIT_UPDATE</sourceObjName>
<createdBy>frans</createdBy>
<createdTime>2019-04-30 09:54:21 UTC</createdTime>
<ownerDesignName>pppc_model</ownerDesignName>
<actions>UPDATE</actions>
<body>DECLARE&lt;br/&gt;   PRAGMA AUTONOMOUS_TRANSACTION;&lt;br/&gt;   V_AUDIT_ID        NUMBER;&lt;br/&gt;   V_PREV_AUDIT_ID   NUMBER;&lt;br/&gt;   V_NEW_PROP_ID     NUMBER;&lt;br/&gt;   V_IF_EXISTS       NUMBER;&lt;br/&gt;   V_MODIFIED_BY     VARCHAR (30);&lt;br/&gt;BEGIN&lt;br/&gt;   -- CREATED BY   : MII - AHMADKU&lt;br/&gt;   -- CREATE DATE  : 10-AGT-2018&lt;br/&gt;   -- REASON       : DIGUNAKAN UNTUK INSERT KE TABLE DATA_AUDIT&lt;br/&gt;&lt;br/&gt;   IF (:NEW.ACTION IS NOT NULL OR :NEW.ACTION &lt;&gt; &apos;FINISHED&apos;)&lt;br/&gt;   THEN&lt;br/&gt;      V_AUDIT_ID := AUDIT_PROPOSAL_SEQ.NEXTVAL;&lt;br/&gt;      V_NEW_PROP_ID := :NEW.PROPOSAL_ID;&lt;br/&gt;      V_MODIFIED_BY := :NEW.ACTION_TO;&lt;br/&gt;      &lt;br/&gt;      SELECT COUNT(1) INTO V_IF_EXISTS&lt;br/&gt;        FROM   AUDIT_PROPOSAL PR&lt;br/&gt;       WHERE   PR.MODIFIED_BY = V_MODIFIED_BY&lt;br/&gt;               AND PR.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;      IF V_IF_EXISTS &gt; 0 THEN &lt;br/&gt;          &lt;br/&gt;          SELECT   NVL(PR.AUDIT_ID,0)&lt;br/&gt;            INTO   V_PREV_AUDIT_ID&lt;br/&gt;            FROM   AUDIT_PROPOSAL PR&lt;br/&gt;           WHERE   PR.MODIFIED_BY = V_MODIFIED_BY&lt;br/&gt;                   AND PR.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;          -- DELETE PREVIOUS AUDIT DATA&lt;br/&gt;          DELETE FROM   AUDIT_PROPOSAL PR&lt;br/&gt;                WHERE   PR.PROPOSAL_ID = V_NEW_PROP_ID&lt;br/&gt;                        AND PR.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;&lt;br/&gt;          DELETE FROM   AUDIT_PROMO_PRODUK PP&lt;br/&gt;                WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID&lt;br/&gt;                        AND PP.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;&lt;br/&gt;          DELETE FROM   AUDIT_PRODUK_VARIANT PV&lt;br/&gt;                WHERE   PV.PROMO_PRODUK_ID IN&lt;br/&gt;                              (SELECT   PP.PROMO_PRODUK_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND PV.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;&lt;br/&gt;          DELETE FROM   AUDIT_PRODUK_ITEM PI&lt;br/&gt;                WHERE   PI.PROMO_PRODUK_ID IN&lt;br/&gt;                              (SELECT   PP.PROMO_PRODUK_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND PI.AUDIT_ID = V_AUDIT_ID;&lt;br/&gt;&lt;br/&gt;          DELETE FROM   AUDIT_TARGET TG&lt;br/&gt;                WHERE   TG.PROMO_PRODUK_ID IN&lt;br/&gt;                              (SELECT   PP.PROMO_PRODUK_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND TG.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;&lt;br/&gt;          DELETE FROM   AUDIT_BIAYA BI&lt;br/&gt;                WHERE   BI.PROMO_PRODUK_ID IN&lt;br/&gt;                              (SELECT   PP.PROMO_PRODUK_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND BI.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;&lt;br/&gt;          DELETE FROM   AUDIT_DISCOUNT DS&lt;br/&gt;                WHERE   DS.PROMO_PRODUK_ID IN&lt;br/&gt;                              (SELECT   PP.PROMO_PRODUK_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND DS.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;&lt;br/&gt;          DELETE FROM   AUDIT_PROMO_BONUS PB&lt;br/&gt;                WHERE   PB.PROMO_PRODUK_ID IN&lt;br/&gt;                              (SELECT   PP.PROMO_PRODUK_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND PB.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;          &lt;br/&gt;          DELETE FROM   AUDIT_PROMO_BONUS_VARIANT PBV&lt;br/&gt;                WHERE   PBV.PROMO_BONUS_ID IN&lt;br/&gt;                              (SELECT   PB.PROMO_BONUS_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_BONUS PB, AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PB.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                                  AND   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND PBV.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;          &lt;br/&gt;          DELETE FROM   AUDIT_PROMO_BONUS_ITEM PBI&lt;br/&gt;                WHERE   PBI.PROMO_BONUS_ID IN&lt;br/&gt;                              (SELECT   PB.PROMO_BONUS_ID&lt;br/&gt;                                 FROM   AUDIT_PROMO_BONUS PB, AUDIT_PROMO_PRODUK PP&lt;br/&gt;                                WHERE   PB.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                                  AND   PP.PROPOSAL_ID = V_NEW_PROP_ID)&lt;br/&gt;                        AND PBI.AUDIT_ID = V_PREV_AUDIT_ID;&lt;br/&gt;          COMMIT;&lt;br/&gt;      END IF;&lt;br/&gt;&lt;br/&gt;      -- INSERT PROPOSAL AUDIT&lt;br/&gt;      INSERT INTO AUDIT_PROPOSAL (AUDIT_ID,&lt;br/&gt;                                  PROPOSAL_ID,&lt;br/&gt;                                  CREATED_BY,&lt;br/&gt;                                  CREATION_DATE,&lt;br/&gt;                                  MODIFIED_BY,&lt;br/&gt;                                  MODIFIED_DATE,&lt;br/&gt;                                  APPROVAL_ACTION)&lt;br/&gt;         SELECT   V_AUDIT_ID,&lt;br/&gt;                  :NEW.PROPOSAL_ID,&lt;br/&gt;                  :NEW.CREATED_BY,&lt;br/&gt;                  :NEW.CREATION_DATE,&lt;br/&gt;                  :NEW.LAST_UPDATED_BY,&lt;br/&gt;                  :NEW.LAST_UPDATE_DATE,&lt;br/&gt;                  :NEW.ACTION&lt;br/&gt;           FROM   DUAL;&lt;br/&gt;&lt;br/&gt;      -- INSERT PROMO PRODUK AUDIT&lt;br/&gt;      INSERT INTO AUDIT_PROMO_PRODUK (AUDIT_ID,&lt;br/&gt;                                      PROMO_PRODUK_ID,&lt;br/&gt;                                      PROPOSAL_ID,&lt;br/&gt;                                      AMOUNT_PROMO,&lt;br/&gt;                                      PRODUCT_CATEGORY,&lt;br/&gt;                                      PRODUCT_CLASS,&lt;br/&gt;                                      PRODUCT_BRAND,&lt;br/&gt;                                      PRODUCT_EXT,&lt;br/&gt;                                      PRODUCT_PACK,&lt;br/&gt;                                      DESCR,&lt;br/&gt;                                      MEKANISME,&lt;br/&gt;                                      EST_BUDGET_PROP,&lt;br/&gt;                                      REG_CUST_FLAG,&lt;br/&gt;                                      KODE_POSTING,&lt;br/&gt;                                      BUDGET_BY,&lt;br/&gt;                                      VALID_COMB,&lt;br/&gt;                                      ITEM_EXPENSE,&lt;br/&gt;                                      KODE_POSTING_MF,&lt;br/&gt;                                      EXCL_CUST_BY,&lt;br/&gt;                                      DISC_MF,&lt;br/&gt;                                      DISC_ON_TOP,&lt;br/&gt;                                      DISC_RASIO_MF,&lt;br/&gt;                                      DISC_RASIO_ON_TOP,&lt;br/&gt;                                      DISC_RASIO_TOTAL,&lt;br/&gt;                                      BRG_BONUS_MF,&lt;br/&gt;                                      BRG_BONUS_ON_TOP,&lt;br/&gt;                                      BRG_BONUS_RASIO_MF,&lt;br/&gt;                                      BRG_BONUS_RASIO_ON_TOP,&lt;br/&gt;                                      BRG_BONUS_RASIO_TOTAL,&lt;br/&gt;                                      BIA_MF,&lt;br/&gt;                                      BIA_ONTOP,&lt;br/&gt;                                      BIA_RASIO_MF,&lt;br/&gt;                                      BIA_RASION_ONTOP,&lt;br/&gt;                                      BIA_RASIO_TOTAL,&lt;br/&gt;                                      PPID_REF,&lt;br/&gt;                                      PRODUCT_APPROVAL,&lt;br/&gt;                                      PRODUK_ROW_NUM,&lt;br/&gt;                                      CLOSE_FLAG,&lt;br/&gt;                                      PAKET_FLAG,&lt;br/&gt;                                      CREATED_BY,&lt;br/&gt;                                      CREATION_DATE)&lt;br/&gt;         SELECT   V_AUDIT_ID,&lt;br/&gt;                  PROMO_PRODUK_ID,&lt;br/&gt;                  PROPOSAL_ID,&lt;br/&gt;                  AMOUNT_PROMO,&lt;br/&gt;                  PRODUCT_CATEGORY,&lt;br/&gt;                  PRODUCT_CLASS,&lt;br/&gt;                  PRODUCT_BRAND,&lt;br/&gt;                  PRODUCT_EXT,&lt;br/&gt;                  PRODUCT_PACK,&lt;br/&gt;                  DESCR,&lt;br/&gt;                  MEKANISME,&lt;br/&gt;                  EST_BUDGET_PROP,&lt;br/&gt;                  REG_CUST_FLAG,&lt;br/&gt;                  KODE_POSTING,&lt;br/&gt;                  BUDGET_BY,&lt;br/&gt;                  VALID_COMB,&lt;br/&gt;                  ITEM_EXPENSE,&lt;br/&gt;                  KODE_POSTING_MF,&lt;br/&gt;                  EXCL_CUST_BY,&lt;br/&gt;                  DISC_MF,&lt;br/&gt;                  DISC_ON_TOP,&lt;br/&gt;                  DISC_RASIO_MF,&lt;br/&gt;                  DISC_RASIO_ON_TOP,&lt;br/&gt;                  DISC_RASIO_TOTAL,&lt;br/&gt;                  BRG_BONUS_MF,&lt;br/&gt;                  BRG_BONUS_ON_TOP,&lt;br/&gt;                  BRG_BONUS_RASIO_MF,&lt;br/&gt;                  BRG_BONUS_RASIO_ON_TOP,&lt;br/&gt;                  BRG_BONUS_RASIO_TOTAL,&lt;br/&gt;                  BIA_MF,&lt;br/&gt;                  BIA_ONTOP,&lt;br/&gt;                  BIA_RASIO_MF,&lt;br/&gt;                  BIA_RASION_ONTOP,&lt;br/&gt;                  BIA_RASIO_TOTAL,&lt;br/&gt;                  PPID_REF,&lt;br/&gt;                  PRODUCT_APPROVAL,&lt;br/&gt;                  PRODUK_ROW_NUM,&lt;br/&gt;                  CLOSE_FLAG,&lt;br/&gt;                  PAKET_FLAG,&lt;br/&gt;                  CREATED_BY,&lt;br/&gt;                  CREATION_DATE&lt;br/&gt;           FROM   PROMO_PRODUK PP&lt;br/&gt;          WHERE   PP.PROPOSAL_ID = V_NEW_PROP_ID&lt;br/&gt;                  AND NOT EXISTS&lt;br/&gt;                        (SELECT   1&lt;br/&gt;                           FROM   AUDIT_PROMO_PRODUK APP&lt;br/&gt;                          WHERE   APP.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                                  AND APP.AUDIT_ID = V_AUDIT_ID);&lt;br/&gt;&lt;br/&gt;      -- INSERT PRODUK VARIANT AUDIT&lt;br/&gt;      INSERT INTO AUDIT_PRODUK_VARIANT (PROMO_PRODUK_ID,&lt;br/&gt;                                        PROD_VARIANT,&lt;br/&gt;                                        VARIANT_DESC,&lt;br/&gt;                                        AUDIT_ID)&lt;br/&gt;         SELECT   PV.PROMO_PRODUK_ID,&lt;br/&gt;                  PV.PROD_VARIANT,&lt;br/&gt;                  PV.VARIANT_DESC,&lt;br/&gt;                  V_AUDIT_ID&lt;br/&gt;           FROM   PRODUK_VARIANT PV, PROMO_PRODUK PP&lt;br/&gt;          WHERE   PV.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                  AND PP.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;      -- INSERT PRODUK ITEM AUDIT&lt;br/&gt;      INSERT INTO AUDIT_PRODUK_ITEM (PROMO_PRODUK_ID,&lt;br/&gt;                                     PROD_ITEM,&lt;br/&gt;                                     ITEM_DESC,&lt;br/&gt;                                     AUDIT_ID)&lt;br/&gt;         SELECT   PI.PROMO_PRODUK_ID,&lt;br/&gt;                  PI.PROD_ITEM,&lt;br/&gt;                  PI.ITEM_DESC,&lt;br/&gt;                  V_AUDIT_ID&lt;br/&gt;           FROM   PRODUK_ITEM PI, PROMO_PRODUK PP&lt;br/&gt;          WHERE   PI.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                  AND PP.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;      -- INSERT TARGET AUDIT&lt;br/&gt;      INSERT INTO AUDIT_TARGET (TARGET_ID,&lt;br/&gt;                                PROMO_PRODUK_ID,&lt;br/&gt;                                GROWTH_BY,&lt;br/&gt;                                GROWTH_PERCENT,&lt;br/&gt;                                PRICE,&lt;br/&gt;                                QTY,&lt;br/&gt;                                UOM,&lt;br/&gt;                                TARGET_VALUE,&lt;br/&gt;                                PRICE_BASED,&lt;br/&gt;                                PRICE_LIST,&lt;br/&gt;                                VALUE,&lt;br/&gt;                                AVG_QTY,&lt;br/&gt;                                AUDIT_ID)&lt;br/&gt;         SELECT   TG.TARGET_ID,&lt;br/&gt;                  TG.PROMO_PRODUK_ID,&lt;br/&gt;                  TG.GROWTH_BY,&lt;br/&gt;                  TG.GROWTH_PERCENT,&lt;br/&gt;                  TG.PRICE,&lt;br/&gt;                  TG.QTY,&lt;br/&gt;                  TG.UOM,&lt;br/&gt;                  TG.TARGET_VALUE,&lt;br/&gt;                  TG.PRICE_BASED,&lt;br/&gt;                  TG.PRICE_LIST,&lt;br/&gt;                  TG.VALUE,&lt;br/&gt;                  TG.AVG_QTY,&lt;br/&gt;                  V_AUDIT_ID&lt;br/&gt;           FROM   TARGET TG, PROMO_PRODUK PP&lt;br/&gt;          WHERE   TG.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                  AND PP.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;      -- INSERT BIAYA AUDIT&lt;br/&gt;      INSERT INTO AUDIT_BIAYA (BIAYA_ID,&lt;br/&gt;                               PROMO_PRODUK_ID,&lt;br/&gt;                               DESCR,&lt;br/&gt;                               BIAYA_YEARLY,&lt;br/&gt;                               BIAYA_NON_YEARLY,&lt;br/&gt;                               BIAYA_QTY,&lt;br/&gt;                               BIAYA_UOM,&lt;br/&gt;                               BIAYA_PRICE,&lt;br/&gt;                               BIAYA_TOT_AMT,&lt;br/&gt;                               AUDIT_ID)&lt;br/&gt;         SELECT   BI.BIAYA_ID,&lt;br/&gt;                  BI.PROMO_PRODUK_ID,&lt;br/&gt;                  BI.DESCR,&lt;br/&gt;                  BI.BIAYA_YEARLY,&lt;br/&gt;                  BI.BIAYA_NON_YEARLY,&lt;br/&gt;                  BI.BIAYA_QTY,&lt;br/&gt;                  BI.BIAYA_UOM,&lt;br/&gt;                  BI.BIAYA_PRICE,&lt;br/&gt;                  BI.BIAYA_TOT_AMT,&lt;br/&gt;                  V_AUDIT_ID&lt;br/&gt;           FROM   BIAYA BI, PROMO_PRODUK PP&lt;br/&gt;          WHERE   BI.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                  AND PP.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;      -- INSERT DISCOUNT AUDIT&lt;br/&gt;      INSERT INTO AUDIT_DISCOUNT (DISCOUNT_ID,&lt;br/&gt;                                  PROMO_PRODUK_ID,&lt;br/&gt;                                  TIPE_PERHITUNGAN,&lt;br/&gt;                                  UOM,&lt;br/&gt;                                  QTY_FROM,&lt;br/&gt;                                  QTY_TO,&lt;br/&gt;                                  TIPE_POTONGAN,&lt;br/&gt;                                  DISC_NON_YEARLY,&lt;br/&gt;                                  DISC_YEARLY,&lt;br/&gt;                                  KELIPATAN,&lt;br/&gt;                                  AUDIT_ID)&lt;br/&gt;         SELECT   DI.DISCOUNT_ID,&lt;br/&gt;                  DI.PROMO_PRODUK_ID,&lt;br/&gt;                  DI.TIPE_PERHITUNGAN,&lt;br/&gt;                  DI.UOM,&lt;br/&gt;                  DI.QTY_FROM,&lt;br/&gt;                  DI.QTY_TO,&lt;br/&gt;                  DI.TIPE_POTONGAN,&lt;br/&gt;                  DI.DISC_NON_YEARLY,&lt;br/&gt;                  DI.DISC_YEARLY,&lt;br/&gt;                  DI.KELIPATAN,&lt;br/&gt;                  V_AUDIT_ID&lt;br/&gt;           FROM   DISCOUNT DI, PROMO_PRODUK PP&lt;br/&gt;          WHERE   DI.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                  AND PP.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;      -- INSERT PROMO BONUS (PROMO BARANG) AUDIT&lt;br/&gt;      INSERT INTO AUDIT_PROMO_BONUS (PROMO_BONUS_ID,&lt;br/&gt;                                     PROMO_PRODUK_ID,&lt;br/&gt;                                     PRODUCT_CATEGORY,&lt;br/&gt;                                     PRODUCT_CLASS,&lt;br/&gt;                                     PRODUCT_BRAND,&lt;br/&gt;                                     PRODUCT_EXT,&lt;br/&gt;                                     PRODUCT_PACK,&lt;br/&gt;                                     UOM,&lt;br/&gt;                                     QTY_FROM,&lt;br/&gt;                                     TIPE_POTONGAN,&lt;br/&gt;                                     VALUE_POTONGAN,&lt;br/&gt;                                     DISC_NON_YEARLY,&lt;br/&gt;                                     DISC_YEARLY,&lt;br/&gt;                                     INPUT_PRICE_BY,&lt;br/&gt;                                     PRICE_VAL,&lt;br/&gt;                                     QTY_MUL_PRICE,&lt;br/&gt;                                     AUDIT_ID)&lt;br/&gt;         SELECT   PB.PROMO_BONUS_ID,&lt;br/&gt;                  PB.PROMO_PRODUK_ID,&lt;br/&gt;                  PB.PRODUCT_CATEGORY,&lt;br/&gt;                  PB.PRODUCT_CLASS,&lt;br/&gt;                  PB.PRODUCT_BRAND,&lt;br/&gt;                  PB.PRODUCT_EXT,&lt;br/&gt;                  PB.PRODUCT_PACK,&lt;br/&gt;                  PB.UOM,&lt;br/&gt;                  PB.QTY_FROM,&lt;br/&gt;                  PB.TIPE_POTONGAN,&lt;br/&gt;                  PB.VALUE_POTONGAN,&lt;br/&gt;                  PB.DISC_NON_YEARLY,&lt;br/&gt;                  PB.DISC_YEARLY,&lt;br/&gt;                  PB.INPUT_PRICE_BY,&lt;br/&gt;                  PB.PRICE_VAL,&lt;br/&gt;                  PB.QTY_MUL_PRICE,&lt;br/&gt;                  V_AUDIT_ID&lt;br/&gt;           FROM   PROMO_BONUS PB, PROMO_PRODUK PP&lt;br/&gt;          WHERE   PB.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID&lt;br/&gt;                  AND PP.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;            &lt;br/&gt;      -- INSERT PROMO BONUS - VARIANT (PROMO BARANG) AUDIT&lt;br/&gt;      INSERT INTO AUDIT_PROMO_BONUS_VARIANT (PROMO_BONUS_ID,&lt;br/&gt;                                     AUDIT_ID,&lt;br/&gt;                                     PROD_VARIANT,&lt;br/&gt;                                     VARIANT_DESC)&lt;br/&gt;        SELECT PBV.PROMO_BONUS_ID,&lt;br/&gt;               V_AUDIT_ID,&lt;br/&gt;               PBV.PROD_VARIANT,&lt;br/&gt;               PBV.VARIANT_DESC &lt;br/&gt;        FROM PROMO_BONUS_VARIANT PBV, PROMO_BONUS PB, PROMO_PRODUK PP&lt;br/&gt;        WHERE PB.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID &lt;br/&gt;        AND PBV.PROMO_BONUS_ID = PB.PROMO_BONUS_ID&lt;br/&gt;        AND PP.PROPOSAL_ID = V_NEW_PROP_ID;      &lt;br/&gt;            &lt;br/&gt;      -- INSERT PROMO BONUS - ITEM (PROMO BARANG) AUDIT&lt;br/&gt;      INSERT INTO AUDIT_PROMO_BONUS_ITEM (PROMO_BONUS_ID,&lt;br/&gt;                                     AUDIT_ID,&lt;br/&gt;                                     PROD_ITEM,&lt;br/&gt;                                     ITEM_DESC)&lt;br/&gt;        SELECT PBI.PROMO_BONUS_ID,&lt;br/&gt;               V_AUDIT_ID,&lt;br/&gt;               PBI.PROD_ITEM,&lt;br/&gt;               PBI.ITEM_DESC &lt;br/&gt;        FROM PROMO_BONUS_PROD_ITEM PBI, PROMO_BONUS PB, PROMO_PRODUK PP&lt;br/&gt;        WHERE PB.PROMO_PRODUK_ID = PP.PROMO_PRODUK_ID &lt;br/&gt;        AND PBI.PROMO_BONUS_ID = PB.PROMO_BONUS_ID&lt;br/&gt;        AND PP.PROPOSAL_ID = V_NEW_PROP_ID;&lt;br/&gt;&lt;br/&gt;      COMMIT;&lt;br/&gt;   END IF;&lt;br/&gt;END;</body>
<triggerTime>AFTER</triggerTime>
<owner>C0E782E6-EB7A-0CBE-800D-2B771EA4EA91</owner>
<table>52E60A78-FD28-8555-A8C1-9F7FD0292827</table>
</TriggerOraclev10g>